<include file="Public/head"/> 
<header data-am-widget="header" class="am-header am-header-default am-header-fixed">	
     <div class="am-header-left am-header-nav"><a href="{$web_url.refer_url}" class=""><i class="am-icon-chevron-left"></i></a>微信安全支付</div>
</header>
<style>
.pay-box{ min-width:320px; max-width:640px; margin:0 auto;}
.pay-username{font-size:16px;font-weight:bold;  text-align:center; margin-top:80px;}
.pay-number{ font-size:35px; font-weight:500;text-align:center;  height:80px;}
.pay-message{ background:#FFF; height:50px; line-height:50px; font-size:14px; padding:0 15px; color:#666; clear:both; overflow:hidden;} 
.pay-message-text{ width:30%; float:left;}
.pay-message-num{ width:70%;float:right;}
.pay-box button{ margin-top:30px;}
</style>


<block name="body">
 <div class="pay-box">
	<div class="pay-username">订单支付共计:</div>
    <div class="pay-number">￥{$factory_info.money}</div>
    <div class="pay-message">
    	<div class="pay-message-text">订单号</div><div class="pay-message-num">{$factory_info.order_id}</div>
    </div>

  <div>
   <button type="button" id="getBrandWCPayRequest" onClick="callpay()"  class="am-btn am-btn-block am-btn-green"> 立即支付</button>
  </div>
 </div>   
  

<script type="text/javascript">
	function callpay()
	{
		WeixinJSBridge.invoke('getBrandWCPayRequest', {$jsApiParameters}, function(res) {
			WeixinJSBridge.log(res.err_msg);
			if(res.err_msg == "get_brand_wcpay_request:ok"){
				
			 	location.href = "{$web_url.url}";
			   
			}else{
				//支付失败业务逻辑
			
			   	location.href = "{$web_url.url}";
			}
		
		});
	}

</script>

</block>






