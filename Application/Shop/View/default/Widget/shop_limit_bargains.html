<link rel="stylesheet" href="__STATIC__/superslide/superslide.css">
<div class="runners-hot-title">
    <ul class="list-group">
      <li class="list-group-item">
        <span class="badge"><a href="{:U('Shop/Index/goods',array('action'=>'limit_bargains'))}"><i class="glyphicon glyphicon-plus"></i></a></span> 限时特价</li>
    </ul>               
</div>  
<if condition="$shop_limit_bargains_info neq false">
<div id="focusAd" class="tv-slideBox">    
    <a class="prev"></a><a class="next"></a>
    <div class="bd">
          <ul>
          <volist name="shop_limit_bargains_info" id="vo">
            <li class="">
                <div class="pic">
                  <a href="{:U('Shop/Index/goodsDetail',array('id'=>$vo['goods_id']))}" target="_self">
                    <img class="add_loading" src="__PUBLIC__/Core/images/blank.png" _src="{$vo.goods_ico|getThumbImageById=450,310}">
                  </a>
                </div>
              <div class="con">
                <div class="bg"></div>
                  <div class="title"><a href="{:U('Shop/Index/goodsDetail',array('id'=>$vo['goods_id']))}" target="_self">{$vo.goods_name}</a></div>

                <div class="runners-price"><span  class="runners-newprice">￥{$vo.bargain_price}</span> <span class="runners-oldprice">原价:<del> ￥{$vo.tox_money_need} </del></span> </div>
            
                <div class="chakan"><a href="{:U('Shop/Index/goodsDetail',array('id'=>$vo['goods_id']))}"> 立即抢购</a></div>
                <div class="runners-index-timedown ">
                	<i class="glyphicon glyphicon-time "></i>&nbsp;剩余
                  <span id="day-{$vo['goods_id']}" class="day time_td">00</span>天
                  <span id="hour-{$vo['goods_id']}" class="hour time_td">00</span>时
                  <span id="mini-{$vo['goods_id']}" class="time_td mini ml5">00</span>分
                  <span id="sec-{$vo['goods_id']}" class="sec time_td">00</span>秒
                  <span id="hm-{$vo['goods_id']}" class="hm time_td" style="display:none">0</span>
                  <script type="text/javascript">

var fnTimeCountDown = function(d, o){
  

  var f = {
    haomiao: function(n){
      if(n < 10)return "00" + n.toString();
      if(n < 100)return "0" + n.toString();
      return n.toString();
    },
    zero: function(n){
      var n = parseInt(n, 10);//解析字符串,返回整数
      if(n > 0){
        if(n <= 9){
          n = "0" + n;  
        }
        return String(n);
      }else{
        return "00";  
      }
    },
    dv: function(){
      
      //d = d || Date.UTC(2050, 0, 1); //如果未定义时间，则我们设定倒计时日期是2050年1月1日
      var now = new Date();
      //现在将来秒差值
      //alert(future.getTimezoneOffset());
      var dur = (d - now.getTime()) / 1000 , mss = d - now.getTime() ,pms = {
        hm:"000",
        sec: "00",
        mini: "00",
        hour: "00",
        day: "00",
        month: "00",
        year: "0"
      };
      if(mss > 0){
        pms.hm = parseInt(f.haomiao(mss % 1000)/100);   //pms.hm = f.haomiao(mss % 1000);
        pms.sec = f.zero(dur % 60);
        pms.mini = Math.floor((dur / 60)) > 0? f.zero(Math.floor((dur / 60)) % 60) : "00";
        pms.hour = Math.floor((dur / 3600)) > 0? f.zero(Math.floor((dur / 3600)) % 24) : "00";
        pms.day = Math.floor((dur / 86400)) > 0? f.zero(Math.floor((dur / 86400))) : "00";
        //月份，以实际平均每月秒数计算
      //  pms.month = Math.floor((dur / 2629744)) > 0? f.zero(Math.floor((dur / 2629744)) % 12) : "00";
      //  pms.year = Math.floor((dur / 31556926)) > 0? Math.floor((dur / 31556926)) : "0";
      }else{
        pms.year=pms.month=pms.day=pms.hour=pms.mini=pms.sec="00";
        pms.hm = "000";
        location.reload();  //倒计时到0，刷新页面
        return;
      }
      return pms;
    },
    ui: function(){
      
      
      if(o.hm){
        o.hm.html(f.dv().hm);
      }
      if(o.sec){
        o.sec.html(f.dv().sec);
      }
      if(o.mini){
        o.mini.html(f.dv().mini);
      }
      if(o.hour){
        o.hour.html(f.dv().hour);
      }
      if(o.day){
        o.day.html(f.dv().day);
      }
      if(o.month){
        o.month.html(f.dv().month);
      }
      if(o.year){
        o.year.html(f.dv().year);
      }     
      setTimeout(f.ui, 1);      
    }
  };  
f.ui();
};


var zxx = {
  obj: function(){
    return {
      hm: $("#hm-{$vo['goods_id']}"),
      sec: $("#sec-{$vo['goods_id']}"),
      mini: $("#mini-{$vo['goods_id']}"),
      hour: $("#hour-{$vo['goods_id']}"),
      day: $("#day-{$vo['goods_id']}"),
      month: $("#month-{$vo['goods_id']}"),
      year: $("#year-{$vo['goods_id']}")
    }
  }
};
<if condition="$vo['bargain_price']">
fnTimeCountDown('{$vo.overtime}', zxx.obj());
</if>

</script>
				      </div>
              
            </div>
            </li>
            </volist>
          </ul>
        </div>
</div>
<script language="javascript"> jQuery("#focusAd").slide({ mainCell:".bd ul",effect: "leftLoop",autoPlay:true,switchLoad:"_src",interTime:5000});</script>
<else />
    <div class="runners-hot-title bargains">
        <span class="bargains_font">暂无限时特价商品</span>
    </div>    
</if>
